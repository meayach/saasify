<!DOCTYPE html>
<html>
  <head>
    <title>Test Direct - Ouverture Configuration</title>
  </head>
  <body>
    <h1>Test Direct du Plan</h1>
    <button onclick="testPlanAndRedirect()">Test + Redirection Auto</button>

    <script>
      function testPlanAndRedirect() {
        // Plan test avec toutes les propriétés nécessaires
        const plan = {
          id: "68bf677bdf8ea2b424543a03",
          name: "Plan Enterprise",
          description: "Plan complet pour les grandes organisations",
          type: "ENTERPRISE",
          billingCycle: "MONTHLY",
          price: 99.99,
          currency: "EUR",
          isActive: true,
          isPopular: false,
          includedFeatures: [
            "Fonctionnalité Premium",
            "Support 24/7",
            "API illimitée",
          ],
          createdAt: "2025-09-08T23:32:11.549Z",
          updatedAt: "2025-09-08T23:32:11.549Z",
        };

        // Nettoyer d'abord le localStorage
        localStorage.removeItem("selectedPlan");
        localStorage.removeItem("selectedApplicationId");

        // Ajouter le nouveau plan
        localStorage.setItem("selectedPlan", JSON.stringify(plan));
        localStorage.setItem(
          "selectedApplicationId",
          "68a87801a0fc8740c837946c"
        );

        console.log("✅ Plan ajouté au localStorage:", plan);
        console.log("✅ Application ID ajouté:", "68a87801a0fc8740c837946c");

        // Redirection immédiate
        setTimeout(() => {
          window.location.href =
            "http://localhost:4201/applications/configure/68a87801a0fc8740c837946c";
        }, 1000);

        alert("Plan configuré ! Redirection dans 1 seconde...");
      }

      // Lancer automatiquement au chargement
      window.onload = function () {
        setTimeout(testPlanAndRedirect, 500);
      };
    </script>
  </body>
</html>
