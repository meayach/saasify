<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test LoggerService</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      .test-section {
        margin: 20px 0;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
      }
      .success {
        background: #d4edda;
        border-color: #c3e6cb;
      }
      .info {
        background: #d1ecf1;
        border-color: #bee5eb;
      }
      button {
        margin: 5px;
        padding: 10px;
        cursor: pointer;
      }
      .console-output {
        background: #f8f9fa;
        padding: 10px;
        margin: 10px 0;
        border-radius: 3px;
        font-family: monospace;
      }
    </style>
  </head>
  <body>
    <h1>üîß Test du Syst√®me de Logs Nettoy√©</h1>

    <div class="test-section success">
      <h2>‚úÖ Probl√®me R√©solu</h2>
      <p>
        <strong>Avant :</strong> Plus de 60 console.log() polluaient la console
      </p>
      <p>
        <strong>Apr√®s :</strong> Syst√®me de logs intelligent et configurable
      </p>
    </div>

    <div class="test-section info">
      <h2>üéõÔ∏è Contr√¥le des Logs</h2>
      <p>Ouvrez la console (F12) et testez les boutons ci-dessous :</p>

      <button onclick="testLoggerInDevMode()">
        üü¢ Test Logs Mode D√©veloppement
      </button>
      <button onclick="simulateProductionMode()">
        üî¥ Simuler Mode Production
      </button>
      <button onclick="showCurrentConfig()">
        üìä Afficher Configuration Actuelle
      </button>

      <div id="config-display" class="console-output">
        <em
          >Cliquez sur "Afficher Configuration Actuelle" pour voir la config</em
        >
      </div>
    </div>

    <div class="test-section">
      <h2>üìã Tests des Logs</h2>
      <button onclick="testAllLogTypes()">
        üß™ Tester Tous les Types de Logs
      </button>
      <button onclick="testWithData()">üì¶ Tester avec Donn√©es Complexes</button>
      <button onclick="clearConsole()">üßπ Nettoyer Console</button>
    </div>

    <div class="test-section">
      <h2>üìñ Instructions</h2>
      <ol>
        <li>Ouvrez la console du navigateur (F12)</li>
        <li>Cliquez sur les boutons pour tester</li>
        <li>Observez les logs conditionnels</li>
        <li>
          Modifiez <code>enableDebugLogs</code> dans environment.ts pour tester
        </li>
      </ol>
    </div>

    <script>
      // Simulation du LoggerService pour les tests
      class MockLoggerService {
        constructor() {
          this.isDebugMode = true; // Simulation du mode d√©veloppement
          console.log("üîß MockLoggerService initialized - Debug mode enabled");
        }

        log(...args) {
          if (this.isDebugMode) {
            console.log("%c[LOG]", "color: blue; font-weight: bold;", ...args);
          }
        }

        warn(...args) {
          if (this.isDebugMode) {
            console.warn(
              "%c[WARN]",
              "color: orange; font-weight: bold;",
              ...args
            );
          }
        }

        error(...args) {
          // Les erreurs sont toujours visibles
          console.error("%c[ERROR]", "color: red; font-weight: bold;", ...args);
        }

        info(...args) {
          if (this.isDebugMode) {
            console.info(
              "%c[INFO]",
              "color: green; font-weight: bold;",
              ...args
            );
          }
        }

        debug(...args) {
          if (this.isDebugMode) {
            console.debug(
              "%c[DEBUG]",
              "color: purple; font-weight: bold;",
              ...args
            );
          }
        }

        setDebugMode(enabled) {
          this.isDebugMode = enabled;
          console.log(
            `%cüîß Debug mode ${enabled ? "enabled" : "disabled"} manually`,
            "color: #0066cc; font-weight: bold;"
          );
        }

        isDebugEnabled() {
          return this.isDebugMode;
        }
      }

      const logger = new MockLoggerService();
      window.logger = logger; // Pour tests manuels

      function testLoggerInDevMode() {
        logger.setDebugMode(true);
        logger.log("üöÄ Test log en mode d√©veloppement");
        logger.warn("‚ö†Ô∏è Test warning en mode d√©veloppement");
        logger.info("‚ÑπÔ∏è Test info en mode d√©veloppement");
        logger.error("‚ùå Test error (toujours visible)");
        logger.debug("üêõ Test debug en mode d√©veloppement");
      }

      function simulateProductionMode() {
        logger.setDebugMode(false);
        console.log(
          "%cüì¢ Simulation du mode PRODUCTION - Seules les erreurs seront visibles",
          "color: red; font-size: 14px; font-weight: bold;"
        );

        logger.log("üöÄ Ce log ne sera PAS visible");
        logger.warn("‚ö†Ô∏è Ce warning ne sera PAS visible");
        logger.info("‚ÑπÔ∏è Cette info ne sera PAS visible");
        logger.error("‚ùå Cette erreur SERA visible (normal)");
        logger.debug("üêõ Ce debug ne sera PAS visible");

        console.log(
          "%c‚úÖ Test termin√© - R√©activez le mode d√©veloppement si besoin",
          "color: green; font-weight: bold;"
        );
      }

      function showCurrentConfig() {
        const isEnabled = logger.isDebugEnabled();
        const config = {
          "Mode de d√©bogage": isEnabled ? "‚úÖ Activ√©" : "‚ùå D√©sactiv√©",
          "Logs visibles": isEnabled
            ? "log, warn, info, debug, error"
            : "error seulement",
          "Environnement simul√©": isEnabled ? "D√©veloppement" : "Production",
        };

        document.getElementById("config-display").innerHTML =
          "<strong>Configuration Actuelle:</strong><br>" +
          Object.entries(config)
            .map(([key, value]) => `${key}: ${value}`)
            .join("<br>");

        console.log(
          "%cüìä Configuration Actuelle:",
          "color: #0066cc; font-weight: bold;",
          config
        );
      }

      function testAllLogTypes() {
        console.log(
          "%cüß™ Test de tous les types de logs...",
          "color: purple; font-size: 14px; font-weight: bold;"
        );

        logger.log("üìù Log normal");
        logger.warn("‚ö†Ô∏è Warning important");
        logger.info("‚ÑπÔ∏è Information utile");
        logger.error("‚ùå Erreur critique");
        logger.debug("üêõ Debug d√©taill√©");

        console.log("%c‚úÖ Test termin√©", "color: green; font-weight: bold;");
      }

      function testWithData() {
        const testData = {
          applicationName: "Test App",
          selectedPlan: {
            id: "12345",
            name: "Plan Starter",
            price: 10,
            currency: "EUR",
          },
          user: {
            id: "user123",
            email: "test@example.com",
          },
        };

        logger.log("üì¶ Test avec donn√©es complexes:", testData);
        logger.info("üéØ Plan s√©lectionn√©:", testData.selectedPlan);
        logger.debug("üë§ Donn√©es utilisateur:", testData.user);
      }

      function clearConsole() {
        console.clear();
        console.log(
          "%cüßπ Console nettoy√©e",
          "color: green; font-weight: bold;"
        );
      }

      // Initialisation
      window.addEventListener("load", () => {
        console.log(
          "%cüéâ Page de test charg√©e - LoggerService pr√™t !",
          "color: green; font-size: 16px; font-weight: bold;"
        );
        showCurrentConfig();
      });
    </script>
  </body>
</html>
